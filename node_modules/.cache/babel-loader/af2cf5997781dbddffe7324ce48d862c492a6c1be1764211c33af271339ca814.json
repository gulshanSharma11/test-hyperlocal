{"ast":null,"code":"var _jsxFileName = \"/Users/gulshansharma/vscode/vasvencher/HyperLocal/src/index.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { BrowserRouter as Router, Route, Routes } from 'react-router-dom';\nimport axios from 'axios';\nimport { auth } from '../firebase';\nimport { signInWithGoogle, getCurrentUser } from './Login';\nimport Home from './Home';\nimport DetailedView from './DetailedView';\nimport Rating from './Rating'; // Ensure the correct path\nimport '../App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const [myData, setMyData] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\n  const [isError, setIsError] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(true);\n  const [ratings, setRatings] = useState({});\n  const [user, setUser] = useState(getCurrentUser());\n  const navigate = useNavigate();\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged(user => {\n      setUser(user);\n    });\n    return () => unsubscribe();\n  }, []);\n  useEffect(() => {\n    axios.get(\"https://raw.githubusercontent.com/ayushku634/ayushku634/main/data.json\").then(response => {\n      setMyData(response.data);\n      if (response.data.length > 0) {\n        setSelectedCategory(response.data[0].cat_id.toString());\n      }\n      setIsLoading(false);\n      const storedRatings = JSON.parse(localStorage.getItem('ratings')) || {};\n      setRatings(storedRatings);\n    }).catch(error => {\n      setIsError(error.message);\n      setIsLoading(false);\n    });\n  }, []);\n  const handleCategoryChange = event => {\n    setSelectedCategory(event.target.value);\n  };\n  const handleRate = async (itemId, rating) => {\n    if (!user) {\n      try {\n        const loggedInUser = await signInWithGoogle();\n        setUser(loggedInUser);\n        rateItem(itemId, rating, loggedInUser.email);\n      } catch (error) {\n        console.error(\"Error during sign in:\", error);\n      }\n    } else {\n      rateItem(itemId, rating, user.email);\n    }\n  };\n  const rateItem = (itemId, rating, userEmail) => {\n    setRatings(prevRatings => {\n      const currentRatings = prevRatings[itemId] || {\n        count: 0,\n        sum: 0,\n        users: []\n      };\n      if (currentRatings.users.includes(userEmail)) {\n        alert(\"You have already rated this item.\");\n        return prevRatings;\n      }\n      const updatedRatings = {\n        ...prevRatings,\n        [itemId]: {\n          count: currentRatings.count + 1,\n          sum: currentRatings.sum + rating,\n          users: [...currentRatings.users, userEmail]\n        }\n      };\n      localStorage.setItem('ratings', JSON.stringify(updatedRatings));\n      return updatedRatings;\n    });\n  };\n  const getAverageRating = itemId => {\n    const currentRatings = ratings[itemId] || {\n      count: 0,\n      sum: 0\n    };\n    return currentRatings.count > 0 ? currentRatings.sum / currentRatings.count : 0;\n  };\n  const selectedData = myData.find(category => category.cat_id.toString() === selectedCategory);\n  const logout = () => {\n    auth.signOut().then(() => {\n      setUser(null);\n      localStorage.removeItem('user');\n    }).catch(error => {\n      console.error(\"Error during sign out:\", error);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: /*#__PURE__*/_jsxDEV(Routes, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        element: /*#__PURE__*/_jsxDEV(Home, {\n          user: user,\n          logout: logout,\n          isLoading: isLoading,\n          isError: isError,\n          selectedCategory: selectedCategory,\n          handleCategoryChange: handleCategoryChange,\n          myData: myData,\n          selectedData: selectedData,\n          ratings: ratings,\n          handleRate: handleRate,\n          getAverageRating: getAverageRating\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/details/:itemId\",\n        element: /*#__PURE__*/_jsxDEV(DetailedView, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 49\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"VX+H9sZjIvuPeXTDnxuRU3FQQDU=\", true);\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","BrowserRouter","Router","Route","Routes","axios","auth","signInWithGoogle","getCurrentUser","Home","DetailedView","Rating","jsxDEV","_jsxDEV","App","_s","myData","setMyData","selectedCategory","setSelectedCategory","isError","setIsError","isLoading","setIsLoading","ratings","setRatings","user","setUser","navigate","useNavigate","unsubscribe","onAuthStateChanged","get","then","response","data","length","cat_id","toString","storedRatings","JSON","parse","localStorage","getItem","catch","error","message","handleCategoryChange","event","target","value","handleRate","itemId","rating","loggedInUser","rateItem","email","console","userEmail","prevRatings","currentRatings","count","sum","users","includes","alert","updatedRatings","setItem","stringify","getAverageRating","selectedData","find","category","logout","signOut","removeItem","children","path","element","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/gulshansharma/vscode/vasvencher/HyperLocal/src/index.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { BrowserRouter as Router, Route, Routes } from 'react-router-dom';\nimport axios from 'axios';\nimport { auth } from '../firebase';\nimport { signInWithGoogle, getCurrentUser } from './Login';\nimport Home from './Home';\nimport DetailedView from './DetailedView';\nimport Rating from './Rating'; // Ensure the correct path\nimport '../App.css';\n\nconst App = () => {\n  const [myData, setMyData] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\n  const [isError, setIsError] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(true);\n  const [ratings, setRatings] = useState({});\n  const [user, setUser] = useState(getCurrentUser());\n\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged(user => {\n      setUser(user);\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  useEffect(() => {\n    axios\n      .get(\"https://raw.githubusercontent.com/ayushku634/ayushku634/main/data.json\")\n      .then((response) => {\n        setMyData(response.data);\n        if (response.data.length > 0) {\n          setSelectedCategory(response.data[0].cat_id.toString());\n        }\n        setIsLoading(false);\n\n        const storedRatings = JSON.parse(localStorage.getItem('ratings')) || {};\n        setRatings(storedRatings);\n      })\n      .catch((error) => {\n        setIsError(error.message);\n        setIsLoading(false);\n      });\n  }, []);\n\n  const handleCategoryChange = (event) => {\n    setSelectedCategory(event.target.value);\n  };\n\n  const handleRate = async (itemId, rating) => {\n    if (!user) {\n      try {\n        const loggedInUser = await signInWithGoogle();\n        setUser(loggedInUser);\n        rateItem(itemId, rating, loggedInUser.email);\n      } catch (error) {\n        console.error(\"Error during sign in:\", error);\n      }\n    } else {\n      rateItem(itemId, rating, user.email);\n    }\n  };\n\n  const rateItem = (itemId, rating, userEmail) => {\n    setRatings((prevRatings) => {\n      const currentRatings = prevRatings[itemId] || { count: 0, sum: 0, users: [] };\n      if (currentRatings.users.includes(userEmail)) {\n        alert(\"You have already rated this item.\");\n        return prevRatings;\n      }\n      const updatedRatings = {\n        ...prevRatings,\n        [itemId]: {\n          count: currentRatings.count + 1,\n          sum: currentRatings.sum + rating,\n          users: [...currentRatings.users, userEmail]\n        },\n      };\n\n      localStorage.setItem('ratings', JSON.stringify(updatedRatings));\n\n      return updatedRatings;\n    });\n  };\n\n  const getAverageRating = (itemId) => {\n    const currentRatings = ratings[itemId] || { count: 0, sum: 0 };\n    return currentRatings.count > 0 ? currentRatings.sum / currentRatings.count : 0;\n  };\n\n  const selectedData = myData.find(\n    (category) => category.cat_id.toString() === selectedCategory\n  );\n\n  const logout = () => {\n    auth.signOut().then(() => {\n      setUser(null);\n      localStorage.removeItem('user');\n    }).catch((error) => {\n      console.error(\"Error during sign out:\", error);\n    });\n  };\n\n  return (\n    <Router>\n      <Routes>\n        <Route path=\"/\" element={\n          <Home \n            user={user} \n            logout={logout} \n            isLoading={isLoading} \n            isError={isError} \n            selectedCategory={selectedCategory} \n            handleCategoryChange={handleCategoryChange} \n            myData={myData} \n            selectedData={selectedData} \n            ratings={ratings} \n            handleRate={handleRate} \n            getAverageRating={getAverageRating}\n          />\n        }/>\n        <Route path=\"/details/:itemId\" element={<DetailedView />} />\n      </Routes>\n    </Router>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}